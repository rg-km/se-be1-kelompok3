const CELL_SIZE=20,CANVAS_SIZE=600,REDRAW_INTERVAL=50,WIDTH=30,HEIGHT=30,DIRECTION={LEFT:0,RIGHT:1,UP:2,DOWN:3},MOVE_INTERVAL=120;function initPosition(){return{x:Math.floor(30*Math.random()),y:Math.floor(30*Math.random())}}function initHeadAndBody(){let e=initPosition();return{head:e,body:[{x:e.x,y:e.y}]}}function initDirection(){return Math.floor(4*Math.random())}function initSnake(e){return{color:e,...initHeadAndBody(),direction:initDirection(),score:0}}let snake=initSnake("purple"),apples=[{color:"red",position:initPosition()},{color:"green",position:initPosition()}];function drawCell(e,t,o,n){e.fillStyle=n,e.fillRect(20*t,20*o,20,20)}function drawScore(e){let t;t=document.getElementById("score1Board");let o=t.getContext("2d");o.clearRect(0,0,600,600),o.font="30px Arial",o.fillStyle=e.color,o.fillText(e.score,10,t.scrollHeight/2)}function draw(){setInterval((function(){let e=document.getElementById("snakeBoard").getContext("2d");e.clearRect(0,0,600,600),drawCell(e,snake.head.x,snake.head.y,snake.color);for(let t=1;t<snake.body.length;t++)drawCell(e,snake.body[t].x,snake.body[t].y,snake.color);for(let o=0;o<apples.length;o++){let n=apples[o];var t=document.getElementById("apple");e.drawImage(t,20*n.position.x,20*n.position.y,20,20)}drawScore(snake)}),50)}function teleport(e){e.head.x<0&&(e.head.x=29),e.head.x>=30&&(e.head.x=0),e.head.y<0&&(e.head.y=29),e.head.y>=30&&(e.head.y=0)}function eat(e,t){for(let o=0;o<t.length;o++){let n=t[o];e.head.x==n.position.x&&e.head.y==n.position.y&&(n.position=initPosition(),e.score++,e.body.push({x:e.head.x,y:e.head.y}))}}function moveLeft(e){e.head.x--,teleport(e),eat(e,apples)}function moveRight(e){e.head.x++,teleport(e),eat(e,apples)}function moveDown(e){e.head.y++,teleport(e),eat(e,apples)}function moveUp(e){e.head.y--,teleport(e),eat(e,apples)}function checkCollision(e){let t=!1;for(let o=0;o<e.length;o++)for(let n=0;n<e.length;n++)for(let i=1;i<e[n].body.length;i++)e[o].head.x==e[n].body[i].x&&e[o].head.y==e[n].body[i].y&&(t=!0);return t&&(alert("Game over"),snake=initSnake("purple")),t}function move(e){switch(e.direction){case DIRECTION.LEFT:moveLeft(e);break;case DIRECTION.RIGHT:moveRight(e);break;case DIRECTION.DOWN:moveDown(e);break;case DIRECTION.UP:moveUp(e)}moveBody(e),checkCollision([e])?initGame():setTimeout((function(){move(e)}),120)}function moveBody(e){e.body.unshift({x:e.head.x,y:e.head.y}),e.body.pop()}function turn(e,t){t!=={[DIRECTION.LEFT]:DIRECTION.RIGHT,[DIRECTION.RIGHT]:DIRECTION.LEFT,[DIRECTION.DOWN]:DIRECTION.UP,[DIRECTION.UP]:DIRECTION.DOWN}[e.direction]&&(e.direction=t)}function initGame(){move(snake)}document.addEventListener("keydown",(function(e){"ArrowLeft"===e.key?turn(snake,DIRECTION.LEFT):"ArrowRight"===e.key?turn(snake,DIRECTION.RIGHT):"ArrowUp"===e.key?turn(snake,DIRECTION.UP):"ArrowDown"===e.key&&turn(snake,DIRECTION.DOWN)})),initGame();
